!function(e,r,o){"use strict";var t=r.getElementById("codemirror"),n=CodeMirror.fromTextArea(t,{lineNumbers:!0,mode:"javascript",theme:"monokai"}),i=r.getElementById("select");i.options[i.selectedIndex].textContent;t=r.getElementById("codemirror-theme");var d=CodeMirror.fromTextArea(t,{lineNumbers:!0,styleActiveLine:!0,mode:"javascript",matchBrackets:!0});o("#select").change(function(){var e=o(":selected").val();o('[title="theme"]').attr("href","../../../app-assets/vendors/css/editors/theme/"+e.toLowerCase()+".css"),d.setOption("theme",e)});var m=location.hash&&location.hash.slice(1)||r.location.search&&decodeURIComponent(r.location.search.slice(1));m&&(i.value=m,d.setOption("theme",m)),CodeMirror.on(e,"hashchange",function(){var e,r=location.hash.slice(1);r&&(i.value=r,e=i.options[i.selectedIndex].textContent,d.setOption("theme",e),location.hash="#"+e)}),t=r.getElementById("codemirror-loadmode"),CodeMirror.modeURL="../../../app-assets/vendors/js/editors/codemirror/mode/*/*.js";var l=CodeMirror.fromTextArea(t,{lineNumbers:!0}),a=r.getElementById("mode");CodeMirror.on(a,"keypress",function(e){13==e.keyCode&&change()}),o("#change").on("click",function(){var e,o,t,n=a.value;if(e=/.+\.([^.]+)$/.exec(n))(i=CodeMirror.findModeByExtension(e[1]))&&(o=i.mode,t=i.mime);else if(/\//.test(n)){var i;(i=CodeMirror.findModeByMIME(n))&&(o=i.mode,t=n)}else o=t=n;o?(l.setOption("mode",t),CodeMirror.autoLoadMode(l,o),r.getElementById("modeinfo").textContent=t):alert("Could not find a mode corresponding to "+n)});var s=r.getElementById("codemirror-sublime").value,c=CodeMirror.keyMap.sublime;for(var u in c){var f=c[u];"fallthrough"==u||"..."==f||/find/.test(f)&&!/findUnder/.test(f)||(s+='\t"'+u+'": "'+f+'",\n')}s+="}\n\n// The implementation of joinLines\n",s+=CodeMirror.commands.joinLines.toString().replace(/^function\s*\(/,"function joinLines(").replace(/\n	/g,"\n")+"\n",t=r.getElementById("codemirror-sublime");n=CodeMirror.fromTextArea(t,{value:s,lineNumbers:!0,theme:"monokai",mode:"javascript",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,showCursorWhenSelecting:!0,theme:"monokai",tabSize:2});t=r.getElementById("codemirror-js");var h,C=r.getElementById("codemirror-html"),g=r.getElementById("codemirror-markdown");function M(){var e=r.getElementById("preview"),o=e.contentDocument||e.contentWindow.document;o.open(),o.write(n.getValue()),o.close()}e.editor=CodeMirror.fromTextArea(t,{mode:"javascript",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),n.foldCode(CodeMirror.Pos(13,0)),e.editor_html=CodeMirror.fromTextArea(C,{mode:"text/html",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),editor_html.foldCode(CodeMirror.Pos(0,0)),editor_html.foldCode(CodeMirror.Pos(21,0)),e.editor_markdown=CodeMirror.fromTextArea(g,{mode:"markdown",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),t=r.getElementById("codemirror-marker"),(n=new CodeMirror.fromTextArea(t,{lineNumbers:!0,styleSelectedText:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0}})).markText({line:6,ch:26},{line:6,ch:42},{className:"styled-background"}),(n=new CodeMirror.fromTextArea(r.getElementById("codemirror-preview"),{mode:"text/html"})).on("change",function(){clearTimeout(h),h=setTimeout(M,300)}),setTimeout(M,300);var p=["#967ADC","#37BC9B","#F6BB42","#3BAFDA","#DA4453","#3f51b5","#2196F3","#ff9800","#e91e63"],v=[];s="";for(var y=1;y<=9;y++){v.push({color:p[y],column:10*y,lineStyle:"dashed"});for(var B=1;B<y;B++)s+="          ";s+="0123456789\n"}t=r.getElementById("codemirror-ruler"),n=new CodeMirror(t,{rulers:v,value:s+s+s,lineNumbers:!0}),t=r.getElementById("codemirror-tabs"),n=CodeMirror.fromTextArea(t,{lineNumbers:!0,tabSize:4,indentUnit:4,indentWithTabs:!0,mode:"text/html"})}(window,document,jQuery);